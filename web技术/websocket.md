# websocket

## 简介

WebSocket是HTML5新增的协议，它的目的是在浏览器和服务器之间建立一个不受限的双向通信的通道，比如说，服务器可以在任意时刻发送消息给浏览器。

WebSocket并不是全新的协议，而是利用了HTTP协议来建立连接。

WebSocket连接必须由浏览器发起，因为请求协议是一个标准的HTTP请求。

HTTP协议是建立在TCP协议之上的，TCP协议本身就实现了全双工通信，但是HTTP协议的请求－应答机制限制了全双工通信。

### HTTP长连接

HTTP请求响应，基于TCP/IP 协议

两个人互相通信，一个人发信，并附上一句，我们保持联系好吗。另一个人在回信中写到，好的，我们继续保持联系。此后，他们每封信里都写上相同的内容。直到有一天，友谊的小船翻了，一个人在回信里写到，我们不要再联系了。另一个人信守承诺，回道：好的，我们不联系了。

### TCP长连接

TCP全双工通信

TCP 连接两端好比两个人，这两个人之间保持通信往来（建立 TCP 连接）。如果他俩经常通信（经常发送 TCP 数据），那这个 TCP 连接自然是建立着的。但如果两人只是偶尔通信。那么，其中一个人（或两人同时）想知道对方是否还在，就会定期发送一份邮件（Keep Alive 探测包），这个邮件没有实质内容，只是问对方是否还在，如果对方收到，就会回复说还在（对这个探测包的 ACK 回应）。

![img](https://upload-images.jianshu.io/upload_images/3108769-e429124b24c3f80e.png?imageMogr2/auto-orient/)